# 미니 콘다 설치

### 참고 자료
> * https://smoothiecoding.kr/%EB%AF%B8%EB%8B%88%EC%BD%98%EB%8B%A4-wsl2-vsc-%ED%8C%8C%EC%9D%B4%EC%8D%AC/
> * https://webnautes.tistory.com/1499
* 윈도우
> *  https://brunch.co.kr/@gnugeun/20

### 설치
> * wget https://repo.anaconda.com/Miniconda3-latest-Linux-x86_64.sh
> * chmod -x Miniconda3-latest_Linux-x86_64.sh
> * ./Miniconda3-latest_Linux-x86_64.sh ( 쉘 스크립트 실행하여 설치한다. 엔터 혹은 yes만 입력 conda init 에서는 yes)
> * sudo nano ~/.bashrc
> * 맨 아랫 줄에 (export PATH=~/miniconda3(파일명)/bin:$PATH
> * source ~/.bashrc 로 적용

### 비활성화하는방법
> * conda config --set auto_activate_base false
> * conda deactivate

### 활성화 하는 방법
> * condat activate

### 가상환경 만들기
> * conda create -n newenv(환경이름) python=3.8

### conda 가상환경 조회
> * conda env list

### newenv 가상환경을 활성화
> * conda activate newenv

* 가상환경 지우는 방법
> * conda env remove -n newenv

* 설치 방법
> * conda install 패키지명
> * conda install -c conda-forge 패키지명 (저장소 지정하여 다운로드)
> * pip install 패키지명

## conda Vscode 확인
> * Vscode 오른쪽 하단 (python 버전을 클릭)
> * 상단 Select Interpreter 에 conda 가상환경을 확인후 선택 사용

# Tensorflow 설치
> * 설치할 환경을 활성화 (activate)

* keras 설치 (둘 중 택 1)
> * pip install keras

* tensorflow 설치 (cpu버전) (둘 중 택 1)
> * pip install tensorflow
> * conda install tensorflow

* Opencv 설치 (둘 중 택 1)
> * pip install opencv-contrib-python
> * conda install -c conda-forge opencv-contrib-python

* matplotlib 설치 (둘 중 택 1)
> * pip install matplotlib
> * conda install -c conda-forge matplotlib

# 티처블 머신 활용

* https://teachablemachine.withgoogle.com/ 에 접속해서 머신 생성
* 머신을 다운로드 받아서 활용

```python
from keras.models import load_model  # TensorFlow is required for Keras to work
import cv2  # Install opencv-python
import numpy as np

# Disable scientific notation for clarity
np.set_printoptions(suppress=True)

# Load the model
model = load_model("./src/conda/keras_model.h5", compile=False)

# Load the labels
class_names = open("./src/conda/labels.txt", "r").readlines()

# CAMERA can be 0 or 1 based on default camera of your computer
camera = cv2.VideoCapture(0)

while True:
    # Grab the webcamera's image.
    ret, image = camera.read()

    # Resize the raw image into (224-height,224-width) pixels
    image = cv2.resize(image, (224, 224), interpolation=cv2.INTER_AREA)

    # Show the image in a window
    cv2.imshow("Webcam Image", image)

    # Make the image a numpy array and reshape it to the models input shape.
    image = np.asarray(image, dtype=np.float32).reshape(1, 224, 224, 3)

    # Normalize the image array
    image = (image / 127.5) - 1

    # Predicts the model
    prediction = model.predict(image)
    index = np.argmax(prediction)
    class_name = class_names[index]
    confidence_score = prediction[0][index]

    # Print prediction and confidence score
    print("Class:", class_name[2:], end="")
    print("Confidence Score:", str(np.round(confidence_score * 100))[:-2], "%")

    # Listen to the keyboard for presses.
    keyboard_input = cv2.waitKey(1)

    # 27 is the ASCII for the esc key on your keyboard.
    if keyboard_input == 27:
        break

camera.release()
cv2.destroyAllWindows()

```
















