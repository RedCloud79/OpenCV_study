# ROI

### 이미지 내 관심영역 (Region of interest, ROI)
* 관심 영역(ROI)이란 말 그대로 영상 내에서 관심이 있는 영역을 뜻한다.
* cv2.imread() 함수를 실행하면 이미지를 numpy 배열로 반환을 한다. numpy 배열은 슬라이싱이 가능하다.
* img[y:y+h, x:x+w]와 같이 원하는 영역을 슬라이싱한다.
* 관심 영역인 roi를 따로 지정하지 않았다면 cv2.rectangle(roi, (x, y), (x+w, y+h), (0,255,0))과 같이 표기된다.
* selectROI() : 사용자가 마우스 클릭과 드래그로 ROI를 선택할 수 있다.
```python
cv2.selectROI(sindowName, img[, showCrosshair[, fromCenter]]) -> retval
```
> showCrosshair = True이면 선택영역에 격자가 표시된다.   
> fromCenter = True이면 마우스 클릭 위치 중심을 기준으로 박스가 선택된다.   
> space bar, enter 키를 사용하면 반환 값 retval에 선택영역의 튜플을 반환한다.   
* selectrOIs() : 사용자가 마우스 클릭과 드래그로 다중 ROI를 선택할 수 있다.   
```python
selectROIs(windowName, img[, showCrosshair[, fromCenter]]) -> boundingBoxes
```
> 마우스 클릭과 드래그로 각 ROI를 선택하고 스페이스바 또는 엔터를 사용한다.   
> 선택영역을 취소하려면 c키를 선택한다.   

### 마우스 드래그로 관심 영역 표시하기

```python
import cv2,  numpy as np

img = cv2.imread('../img/sunset.jpg')
rects =	cv2.selectROIs('img', img, False, True)
print('rects = ', rects)

for r in rects:
    roi = cv2.rectangle(img, (r[0], r[1]), (r[0] + r[2], r[1] + r[3]), 255)
    src = img[r[1]:r[1]+r[3], r[0]: r[0]+r[2]]
    cv2.imshow('cropped', src)  # ROI 지정 영역을 새창으로 표시
    cv2.moveWindow('cropped', 0, 0) # 새창을 화면 좌측 상단에 이동
    cv2.imwrite('./cropped2.jpg', src)   # ROI 영역만 파일로 저장
    cv2.imwrite('./cropped3.jpg', roi)   # ROI 영역만 파일로 저장


cv2.imshow('img', img)
cv2.waitKey(0)
cv2.destroyAllWindows()
```

> * sunset.jpg 사진 파일을 활용, selectROIs로 다중으로 영역을 지정가능
> * 최종적으로는 여러개의 선택 영역의 정보 출력 및 마지막 지정영역 사진을 저장






















